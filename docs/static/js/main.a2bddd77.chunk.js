(this.webpackJsonpsupr=this.webpackJsonpsupr||[]).push([[0],{16:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var r,a=n(2),o=n.n(a),c=n(11),i=n.n(c),s=(n(16),n(1)),d=n.n(s),l=n(3),u=(n(5),n(0)),p=function(e){return Object(u.jsxs)("div",{className:"header",children:[Object(u.jsx)("hr",{}),Object(u.jsx)("h2",{children:"Trello Board"}),Object(u.jsx)("hr",{})]})},f=n(7),b=n(4),g=n.p+"static/media/cancel.08079bda.svg",j=function(e){var t=Object(a.useState)(e.title||""),n=Object(b.a)(t,2),r=n[0],o=n[1],c=Object(a.useState)(e.text||""),i=Object(b.a)(c,2),s=i[0],d=i[1],l=Object(a.useState)(e.buttonText||""),p=Object(b.a)(l,2),f=p[0],j=p[1],m=e.deleteCard,v=e.addCard;return Object(u.jsxs)("div",{className:"card",id:e.id,children:[Object(u.jsx)("img",{className:"cross",src:g,alt:"cross",width:"50",height:"15",onClick:m}),Object(u.jsx)("input",{type:"text",id:"title_".concat(e.id),placeholder:"Title",value:r,onChange:function(e){o(e.target.value)}}),Object(u.jsx)("textarea",{placeholder:"Type anything",id:"text_".concat(e.id),rows:5,cols:10,value:s,onChange:function(e){d(e.target.value)}}),Object(u.jsx)("button",{onClick:function(e){0===r.length?(e.preventDefault(),alert("Please Enter Title atleast")):(j("Update"),v(e,r,s,f))},children:f||"Save"})]})},m=n.p+"static/media/plus.d5048b9a.svg",v=function(e){var t=e.addCard;return Object(u.jsx)("div",{className:"AddCardIcon",children:Object(u.jsx)("img",{style:{marginLeft:"10%"},src:m,alt:"plusLogo",width:"60",height:"100",onClick:t})})},h=n(10),x={InitDB:function(e,t){var n=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;return new Promise((function(a,o){var c=t;null!=localStorage.getItem("dbVer")&&(c=localStorage.getItem("dbVer"));var i=n.open(e,parseInt(c,10));i.onerror=function(e){console.log("Error opening database:".concat(e)),o(e)},i.onsuccess=function(e){r=i.result,localStorage.setItem("dbVer",c),console.log("Database successfully opened : ".concat(e)),a()}}))},createListStore:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,o=localStorage.getItem("dbVer");return new Promise((function(c,i){r&&r.close();var s=a.open(e,parseInt(o,10)+1);s.onerror=function(e){localStorage.setItem("dbVer",r.version),console.log(e)},s.onsuccess=function(e){r=s.result,localStorage.setItem("dbVer",r.version),c(!0)},s.onupgradeneeded=function(e){r=e.target.result,!0===n?r.createObjectStore(t,{autoIncrement:!0}):r.createObjectStore(t,{keyPath:"id"}),localStorage.setItem("dbVer",r.version),c()}}))},deleteList:function(e,t){var n=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,a=localStorage.getItem("dbVer");return new Promise((function(o,c){!1===r.objectStoreNames.contains(t)&&c(new Error("ObjectStoreName not found.")),r.close();var i=n.open(e,parseInt(a,10)+1);i.onerror=function(e){localStorage.setItem("dbVer",parseInt(a,10)+1),c(new Error(e)),console.log(e)},i.onsuccess=function(e){r=i.result,localStorage.setItem("dbVer",parseInt(a,10)+1),o(!0)},i.onupgradeneeded=function(e){console.log("inside onupgrade"),(r=e.target.result).deleteObjectStore(t),o()}}))},addCard:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"data";return new Promise((function(o,c){if(r.objectStoreNames.contains(e))try{var i=r.transaction(e,"readwrite"),s=i.objectStore(e);""===n?s.add(Object(h.a)({},a,t)):s.add(Object(h.a)({id:n},a,t)),i.oncomplete=function(){console.log("Insert operation completed !"),o()}}catch(d){console.log(" error in insert operation "+d),c(d)}else console.log("ObjectStoreName not found"),c("ObjectStoreName not found")}))},updateCard:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return new Promise((function(o,c){var i=r.transaction(e,"readwrite").objectStore(e),s=i.get(t);s.onsuccess=function(e){try{var t=e.target.result,r={};if(""==a){var s=Object.assign(t.data,n);r.id=t.id,r.data=s}else t[a]=n;var d=i.put(r);d.onsuccess=function(e){console.log(" success in update ".concat(e)),o()},d.onerror=function(e){console.log("error in update ".concat(e)),c(e)}}catch(l){console.log("error in update operation: "+l),c(l)}},s.onerror=function(e){console.log("error in update operation: "+e)}}))},getAllCards:function(e){return new Promise((function(t,n){r.transaction(e).objectStore(e).getAll().onsuccess=function(e){try{var n=e.target.result;t(n)}catch(r){console.log("error in read operation: "+r)}}}))},deleteCard:function(e,t){return new Promise((function(n){var a=r.transaction(e,"readwrite");a.objectStore(e).delete(t);a.oncomplete=function(e){console.log("deleted successfully ".concat(e)),n()}}))},readAllLists:function(e,t,n){return new Promise(function(){var a=Object(l.a)(d.a.mark((function a(o,c){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e(t,n);case 2:o(r.objectStoreNames);case 3:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}())}},w=function(e){var t=Object(a.useState)(e.cards||[]),n=Object(b.a)(t,2),r=n[0],o=n[1],c=function(){var e=Object(l.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.length+1,o([].concat(Object(f.a)(r),[{id:n.toString()}]));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(l.a)(d.a.mark((function e(t,n,a,c){var i,s,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.target.parentElement.id,s=t.target.parentElement.parentElement.parentElement.id,"Update"!==c){e.next=7;break}return e.next=5,x.updateCard(s,i.toString(),{title:n,text:a});case 5:e.next=9;break;case 7:return e.next=9,x.addCard(s,{title:n,text:a,create_tm:(new Date).getTime()},i.toString());case 9:l=-1,r.forEach((function(e,t){e.id==i.toString()&&(l=t)})),l>=0&&(r[l]={id:i.toString(),data:{title:n,text:a,create_tm:(new Date).getTime()}}),o(r);case 13:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),s=function(){var e=Object(l.a)(d.a.mark((function e(t){var n,a,c,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.parentElement.parentElement.parentElement.id,a=t.target.parentElement.id,c=r.filter((function(e){return console.log(e.id,a),e.id!=a})),i=c.sort((function(e,t){var n,r;return(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.create_tm)-(null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.create_tm)})),o(i),e.next=7,x.deleteCard(n,a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"column",children:[r.map((function(e){var t,n,r,a,o=e.id,c="Save";return(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.title)||void 0===n?void 0:n.length)>0&&(c="Update"),Object(u.jsx)(j,{id:o,deleteCard:s,addCard:i,title:null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.title,text:null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.text,buttonText:c},o)})),Object(u.jsx)(v,{addCard:c})]})},O=n.p+"static/media/reminders.e81f9a98.svg",S=function(e){var t=e.add;return Object(u.jsx)("div",{children:Object(u.jsx)("img",{style:{marginLeft:"80%",marginTop:"70%"},src:O,alt:"plusLogo",width:"100",height:"80",onClick:t})})},I=function(){var e=Object(a.useState)([]),t=Object(b.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(0),c=Object(b.a)(o,2),i=c[0],s=(c[1],Object(a.useState)(1)),p=Object(b.a)(s,2),j=p[0],m=p[1],v=[],h=j,O="trello",I=function(){var e=Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h=j+1,r([].concat(Object(f.a)(n),[{id:h}])),v.push(h),e.next=5,x.createListStore(O,h,!1);case 5:m(h+1),localStorage.setItem("listCounter",parseInt(h,10)+1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(l.a)(d.a.mark((function e(t){var a,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.parentElement.id,o=n.filter((function(e){return e.id!=a})),r(o),e.next=5,x.deleteList(O,a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){var e=localStorage.getItem("dbVer")||1,t=localStorage.getItem("listCounter")||1;function n(){return(n=Object(l.a)(d.a.mark((function e(n,a){var o,c,i,s,l,u,p;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.readAllLists(n,a);case 2:o=e.sent,c=Object(f.a)(o),i=[],s=0;case 6:if(!(s<c.length)){e.next=18;break}return l={},u=c[s],e.next=11,x.getAllCards(u);case 11:p=e.sent,l.id=u,l.cards=p,i.push(l);case 15:s++,e.next=6;break;case 18:r(i.map((function(e){return{id:e.id,cards:e.cards}}))),localStorage.setItem("listCounter",parseInt(t,10)+1),m(parseInt(t,10)),console.log(o);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e,t){n.apply(this,arguments)}(x.InitDB,O,e)}),[i]),Object(u.jsxs)("div",{className:"grid",children:[n.map((function(e){return Object(u.jsxs)("div",{id:e.id,children:[Object(u.jsx)("img",{className:"crossColumn",src:g,alt:"cross",width:"50",height:"20",onClick:C}),Object(u.jsx)(w,{id:e.id,cards:e.cards},e.id)]},e.id)})),Object(u.jsx)("div",{className:"addNewList",children:Object(u.jsx)(S,{add:I})},h)]})},C=function(){var e="trello";function t(){return(t=Object(l.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.InitDB(e,1);case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),Object(u.jsxs)("div",{className:"app",children:[Object(u.jsx)(p,{}),Object(u.jsx)(I,{})]})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,20)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),o(e),c(e)}))};i.a.render(Object(u.jsx)(o.a.StrictMode,{children:Object(u.jsx)(C,{})}),document.getElementById("root")),k()},5:function(e,t,n){}},[[19,1,2]]]);
//# sourceMappingURL=main.a2bddd77.chunk.js.map